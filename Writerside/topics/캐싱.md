# 캐싱

`OpenRiroClient`는 캐싱을 제공하며, 기본적으로 설정되어 있습니다.

## 설정

```Kotlin
val client = OpenRiroClient(api,
    boardCacheStrategy = CacheStrategy.BOARD,
    boardMsgCacheStrategy = CacheStrategy.BOARD_MSG,
    portfolioCacheStrategy = CacheStrategy.PORTFOLIO,
    portfolioListCacheStrategy = CacheStrategy.PORTFOLIO_LIST
)
```

이는 기본 세팅이며, 변경할 수 있습니다. 메뉴는 영구히 캐시되며 변경할 수 없습니다. `CacheStrategy`는 두 값을 갖습니다.

softLimit
: {type=narrow} 캐시가 이 시간을 지나면, 캐시를 다시 검증합니다. 기본적으로 1시간, `portfolioList`의 경우 30분입니다.

hardLimit
: {type=narrow} 캐시가 이 시간을 지나면 무조건 무효화합니다. 기본적으로 24시간, `portfolioList`의 경우 12시간입니다.

## 캐시의 검증

캐시가 soft limit을 지났다면, **재검증**을 수행합니다. 재검증은 다음과 같이 이루어집니다.

1. 먼저 첫 페이지를 다시 요청합니다. `totalCount`와 첫 페이지의 항목들을 얻습니다.
2. `totalCount`가 캐시된 `totalCount`와 다르거나, 첫 페이지의 항목들 중 하나라도 캐시된 항목과 다르다면, 캐시를 무효화합니다. 그렇지 않다면, 캐시된 데이터를 반환합니다.

hard limit을 지났다면, 무조건 캐시를 무효화합니다.